{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/Project/eVoting_FE/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Project/eVoting_FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\"; // reactstrap components\n\nimport { Button, Card, CardHeader, CardBody, FormGroup, Form, Input, Container, Row, Col, Badge, Modal, ModalHeader, ModalBody, ModalFooter, Label } from \"reactstrap\"; // layout for this page\n\nimport Admin from \"layouts/Admin.js\"; // core components\n\nimport Header from \"components/Headers/Header.js\";\nimport DataTable from \"react-data-table-component\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport Cookies from \"universal-cookie\";\n\nvar Event = function Event() {\n  var router = useRouter();\n\n  var _useState = useState(false),\n      modal = _useState[0],\n      setModal = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      namaEvent = _useState2[0],\n      setNamaEvent = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      deskripsiEvent = _useState3[0],\n      setDeskripsiEvent = _useState3[1];\n\n  var _useState4 = useState(false),\n      activeEvent = _useState4[0],\n      setActiveEvent = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      jumlahKandidat = _useState5[0],\n      setJumlahKandidat = _useState5[1];\n\n  var _useState6 = useState(false),\n      showFotoEvent = _useState6[0],\n      setShowFotoEvent = _useState6[1];\n\n  var _useState7 = useState(\"create\"),\n      action = _useState7[0],\n      setAction = _useState7[1];\n\n  var _useState8 = useState([]),\n      events = _useState8[0],\n      setEvents = _useState8[1];\n\n  var _useState9 = useState(null),\n      id = _useState9[0],\n      setId = _useState9[1];\n\n  var _useState10 = useState(false),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useState11 = useState(10),\n      perPage = _useState11[0],\n      setPerPage = _useState11[1];\n\n  var _useState12 = useState(1),\n      currentPage = _useState12[0],\n      setCurrentPage = _useState12[1];\n\n  var _useState13 = useState(0),\n      totalRows = _useState13[0],\n      setTotalRows = _useState13[1];\n\n  var cookies = new Cookies();\n  useEffect(function () {\n    getEvent();\n  }, [perPage, currentPage]);\n\n  var getEvent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$get, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return axios.get(\"\".concat(process.env.NEXT_PUBLIC_URL, \"/event?page=\").concat(currentPage, \"&size=\").concat(perPage));\n\n            case 3:\n              _yield$axios$get = _context.sent;\n              res = _yield$axios$get.data;\n              setTotalRows(res.data.totalData);\n              setEvents(res.data.content);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getEvent() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  var columns = [{\n    name: \"Nama Event\",\n    selector: function selector(row) {\n      return row.event_name ? row.event_name : \"-\";\n    }\n  }, {\n    name: \"Deskripsi\",\n    selector: function selector(row) {\n      return row.description ? row.description : \"-\";\n    }\n  }, {\n    name: \"Active\",\n    selector: function selector(row) {\n      return row.is_active === 1 ? /*#__PURE__*/_jsx(Badge, {\n        color: \"primary\",\n        pill: true,\n        children: \"Yes\"\n      }) : /*#__PURE__*/_jsx(Badge, {\n        color: \"danger\",\n        pill: true,\n        children: \"No\"\n      });\n    }\n  }, {\n    name: \"Kuota Vote\",\n    selector: function selector(row) {\n      return row.quota;\n    }\n  }, {\n    name: \"Tampilkan Foto\",\n    selector: function selector(row) {\n      return row.show_photo === 1 ? /*#__PURE__*/_jsx(Badge, {\n        color: \"primary\",\n        pill: true,\n        children: \"Yes\"\n      }) : /*#__PURE__*/_jsx(Badge, {\n        color: \"danger\",\n        pill: true,\n        children: \"No\"\n      });\n    }\n  }, {\n    name: \"Action\",\n    selector: function selector(row) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          width: 800,\n          height: \"auto\"\n        },\n        children: [/*#__PURE__*/_jsx(Button, {\n          color: \"primary\",\n          size: \"sm\",\n          onClick: function onClick() {\n            return handleDetailEvent(row.id);\n          },\n          children: \"Detail\"\n        }), /*#__PURE__*/_jsx(Button, {\n          color: \"success\",\n          size: \"sm\",\n          onClick: function onClick() {\n            return handleEditForm(row.id);\n          },\n          children: \"Edit\"\n        }), /*#__PURE__*/_jsx(Button, {\n          color: \"danger\",\n          size: \"sm\",\n          onClick: function onClick() {\n            return handleDelete(row.id);\n          },\n          children: \"Hapus\"\n        })]\n      });\n    }\n  }];\n\n  var handleDetailEvent = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              router.push(\"event/event-detail/\".concat(id));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleDetailEvent(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleEditForm = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setAction(\"update\");\n              _context3.next = 3;\n              return axios.get(\"\".concat(process.env.NEXT_PUBLIC_URL, \"/event/\").concat(id, \" \"), {\n                headers: {\n                  Authorization: \"Bearer \".concat(cookies.get(\"token\"))\n                }\n              }).then(function (res) {\n                var data = res.data.data;\n                console.log(data, \"data detail edit\");\n                setId(data.id);\n                setNamaEvent(data.event_name);\n                setActiveEvent(data.is_active);\n                setShowFotoEvent(data.show_photo);\n                setJumlahKandidat(data.quota);\n                setDeskripsiEvent(data.description);\n                setModal(true);\n              })[\"catch\"](function (e) {\n                Swal.fire({\n                  icon: \"error\",\n                  title: \"Terjadi Kesalahan!\",\n                  text: e\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleEditForm(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleDelete = function handleDelete(id) {\n    Swal.fire({\n      title: \"Hapus Event?\",\n      text: \"Data yang telah dihapus tidak dapat dikembalikan!\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Hapus\"\n    }).then(function (result) {\n      if (result.isConfirmed) {\n        axios[\"delete\"](\"\".concat(process.env.NEXT_PUBLIC_URL, \"/event/\").concat(id, \" \"), {\n          headers: {\n            Authorization: \"Bearer \".concat(cookies.get(\"token\"))\n          }\n        }).then(function (res) {\n          Swal.fire({\n            icon: \"success\",\n            title: \"Berhasil\",\n            text: \"Data Berhasil Dihapus !\"\n          });\n          getEvent();\n        });\n      }\n    });\n  };\n\n  var handleSubmitEvent = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              data = {\n                event_name: namaEvent,\n                is_active: activeEvent,\n                quota: jumlahKandidat,\n                show_photo: showFotoEvent,\n                description: deskripsiEvent\n              };\n\n              if (!(action === \"create\")) {\n                _context4.next = 6;\n                break;\n              }\n\n              _context4.next = 4;\n              return axios.post(\"\".concat(process.env.NEXT_PUBLIC_URL, \"/event\"), data, {\n                headers: {\n                  Authorization: \"Bearer \".concat(cookies.get(\"token\"))\n                }\n              }).then(function (res) {\n                Swal.fire({\n                  icon: \"success\",\n                  title: \"Berhasil\",\n                  text: \"Data Berhasil Disimpan !\"\n                });\n                setModal(false);\n                getEvent();\n              })[\"catch\"](function (e) {\n                console.log(e);\n\n                if (e.response.data.error_messages) {\n                  Swal.fire({\n                    icon: \"error\",\n                    title: \"Terjadi Kesalahan!\",\n                    text: e.response.data.error_messages[0].msg\n                  });\n                } else {\n                  Swal.fire({\n                    icon: \"error\",\n                    title: \"Terjadi Kesalahan!\",\n                    text: e\n                  });\n                }\n              });\n\n            case 4:\n              _context4.next = 8;\n              break;\n\n            case 6:\n              _context4.next = 8;\n              return axios.put(\"\".concat(process.env.NEXT_PUBLIC_URL, \"/event/\").concat(id), data, {\n                headers: {\n                  Authorization: \"Bearer \".concat(cookies.get(\"token\"))\n                }\n              }).then(function (res) {\n                Swal.fire({\n                  icon: \"success\",\n                  title: \"Berhasil\",\n                  text: \"Data Berhasil Disimpan !\"\n                });\n                setModal(false);\n                getEvent();\n              })[\"catch\"](function (e) {\n                console.log(e);\n\n                if (e.response.data.error_messages) {\n                  Swal.fire({\n                    icon: \"error\",\n                    title: \"Terjadi Kesalahan!\",\n                    text: e.response.data.error_messages[0].msg\n                  });\n                } else {\n                  Swal.fire({\n                    icon: \"error\",\n                    title: \"Terjadi Kesalahan!\",\n                    text: e\n                  });\n                }\n              });\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleSubmitEvent() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleTambah = function handleTambah() {\n    setAction(\"create\");\n    setModal(true);\n  };\n\n  var onClosedModal = function onClosedModal() {\n    setId(null);\n    setNamaEvent(\"\");\n    setActiveEvent(false);\n    setShowFotoEvent(false);\n    setJumlahKandidat(\"\");\n    setDeskripsiEvent(\"\");\n  };\n\n  var handleChange = function handleChange(e, field) {\n    var data = e.target.value;\n\n    if (field === \"nama\") {\n      setNamaEvent(data);\n    } else if (field === \"active\") {\n      setActiveEvent(e.target.checked);\n    } else if (field === \"deskripsi\") {\n      setDeskripsiEvent(data);\n    } else if (field === \"jumlah\") {\n      setJumlahKandidat(data);\n    } else if (field === \"foto\") {\n      setShowFotoEvent(e.target.checked);\n    }\n  };\n\n  var handlePageChange = function handlePageChange(page) {\n    setCurrentPage(page);\n  };\n\n  var handlePerRowsChange = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(newPerPage, page) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setPerPage(newPerPage);\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handlePerRowsChange(_x3, _x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(Container, {\n      className: \"mt--7\",\n      fluid: true,\n      children: /*#__PURE__*/_jsx(Row, {\n        children: /*#__PURE__*/_jsx(Col, {\n          children: /*#__PURE__*/_jsxs(Card, {\n            className: \"shadow\",\n            children: [/*#__PURE__*/_jsx(CardHeader, {\n              className: \"bg-transparent\",\n              children: /*#__PURE__*/_jsx(\"h3\", {\n                className: \"mb-0\",\n                children: \"Event\"\n              })\n            }), /*#__PURE__*/_jsxs(CardBody, {\n              children: [/*#__PURE__*/_jsx(Button, {\n                color: \"danger\",\n                onClick: function onClick() {\n                  return handleTambah();\n                },\n                children: \"Tambah Event\"\n              }), /*#__PURE__*/_jsx(Row, {\n                children: /*#__PURE__*/_jsx(Col, {\n                  children: /*#__PURE__*/_jsx(DataTable, {\n                    columns: columns,\n                    data: events,\n                    pagination: true,\n                    progressPending: loading,\n                    paginationTotalRows: totalRows,\n                    paginationDefaultPage: currentPage,\n                    onChangeRowsPerPage: handlePerRowsChange,\n                    onChangePage: handlePageChange\n                  })\n                })\n              })]\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Modal, {\n      isOpen: modal,\n      toggle: toggle,\n      onClosed: onClosedModal,\n      children: [/*#__PURE__*/_jsx(ModalHeader, {\n        toggle: toggle,\n        children: action === \"create\" ? \"Tambah Event\" : \"Edit Event\"\n      }), /*#__PURE__*/_jsx(ModalBody, {\n        children: /*#__PURE__*/_jsxs(Form, {\n          children: [/*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(Label, {\n              \"for\": \"namaEvent\",\n              children: \"Event\"\n            }), /*#__PURE__*/_jsx(Input, {\n              id: \"namaEvent\",\n              name: \"event\",\n              placeholder: \"Masukkan Nama Event\",\n              type: \"text\",\n              onChange: function onChange(e) {\n                return handleChange(e, \"nama\");\n              },\n              value: namaEvent\n            })]\n          }), /*#__PURE__*/_jsxs(FormGroup, {\n            check: true,\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsx(Input, {\n              type: \"checkbox\",\n              checked: activeEvent,\n              defaultValue: activeEvent,\n              onChange: function onChange(e) {\n                return handleChange(e, \"active\");\n              }\n            }), \" \", /*#__PURE__*/_jsx(Label, {\n              check: true,\n              children: \"Active\"\n            })]\n          }), /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(Label, {\n              \"for\": \"deskripsi\",\n              children: \"Deskripsi Event\"\n            }), /*#__PURE__*/_jsx(Input, {\n              id: \"deskripsi\",\n              name: \"deskripsi\",\n              type: \"textarea\",\n              onChange: function onChange(e) {\n                return handleChange(e, \"deskripsi\");\n              },\n              value: deskripsiEvent\n            })]\n          }), /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(Label, {\n              \"for\": \"jumlahKandidat\",\n              children: \"Jumlah Kandidat yang Dapat Dipilih\"\n            }), /*#__PURE__*/_jsx(Input, {\n              id: \"jumlahKandidat\",\n              name: \"jumlah_kandidat\",\n              placeholder: \"Masukkan jumlah kandidat\",\n              type: \"number\",\n              onChange: function onChange(e) {\n                return handleChange(e, \"jumlah\");\n              },\n              value: jumlahKandidat\n            })]\n          }), /*#__PURE__*/_jsxs(FormGroup, {\n            check: true,\n            children: [/*#__PURE__*/_jsx(Input, {\n              type: \"checkbox\",\n              checked: showFotoEvent,\n              onChange: function onChange(e) {\n                return handleChange(e, \"foto\");\n              }\n            }), \" \", /*#__PURE__*/_jsx(Label, {\n              check: true,\n              children: \"Tampilkan Foto Kandidat\"\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(ModalFooter, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          color: \"primary\",\n          onClick: function onClick() {\n            return handleSubmitEvent();\n          },\n          children: \"Simpan\"\n        }), \" \", /*#__PURE__*/_jsx(Button, {\n          color: \"secondary\",\n          onClick: toggle,\n          children: \"Cancel\"\n        })]\n      })]\n    })]\n  });\n};\n\nEvent.layout = Admin;\nexport default Event;","map":null,"metadata":{},"sourceType":"module"}