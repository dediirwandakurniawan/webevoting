{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from \"react\";\nimport { Alert, Button, Card, CardBody, CardHeader, Col, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Label, Spinner } from \"reactstrap\";\nimport Auth from \"layouts/Auth.js\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport Cookies from \"universal-cookie\";\nimport { useRouter } from \"next/router\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEye, faEyeSlash } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction Login() {\n  const router = useRouter();\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loginSebagai,\n    1: setLoginSebagai\n  } = useState(\"\");\n  const {\n    0: showAlert,\n    1: setShowAlert\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const cookies = new Cookies();\n  const {\n    0: showPassword,\n    1: setShowPassword\n  } = useState(false);\n\n  const handleTogglePassword = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleLogin = e => {\n    e.preventDefault();\n    setLoading(true);\n    const data = {\n      email: username,\n      password\n    };\n    axios.post(`${process.env.NEXT_PUBLIC_URL}/mst-user/login`, data).then(res => {\n      setLoading(false);\n      let data = res.data.data;\n      cookies.set(\"token\", data.token);\n      cookies.set(\"roles\", data.role);\n\n      if (data.role === \"admin\") {\n        router.push(\"/admin/event\");\n      } else {\n        router.push(\"/user\");\n      }\n    }).catch(e => {\n      var _e$response, _e$response$data, _e$response$data$erro;\n\n      setLoading(false);\n\n      if ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$erro = _e$response$data.error_messages) === null || _e$response$data$erro === void 0 ? void 0 : _e$response$data$erro.length) > 0) {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Terjadi kesalahan...\",\n          text: e.response.data.error_messages[0].msg\n        });\n      } else {\n        var _e$response2, _e$response2$data;\n\n        Swal.fire({\n          icon: \"error\",\n          title: \"Terjadi kesalahan...\",\n          text: e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Col, {\n      lg: \"5\",\n      md: \"7\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        className: \"bg-secondary shadow border-0\",\n        children: [/*#__PURE__*/_jsx(CardHeader, {\n          className: \"bg-transparent \",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-muted text-center\",\n            children: /*#__PURE__*/_jsx(\"h3\", {\n              children: \"Login\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(CardBody, {\n          className: \"px-lg-5 py-lg-5\",\n          children: [showAlert && /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center text-muted mb-4\",\n            children: /*#__PURE__*/_jsx(Alert, {\n              color: \"danger\",\n              children: \"Username Atau Password Salah\"\n            })\n          }), /*#__PURE__*/_jsxs(Form, {\n            onSubmit: e => handleLogin(e),\n            children: [/*#__PURE__*/_jsx(FormGroup, {\n              children: /*#__PURE__*/_jsxs(InputGroup, {\n                className: \"input-group-alternative mb-3\",\n                children: [/*#__PURE__*/_jsx(InputGroupAddon, {\n                  addonType: \"prepend\",\n                  children: /*#__PURE__*/_jsx(InputGroupText, {\n                    children: /*#__PURE__*/_jsx(\"i\", {\n                      className: \"ni ni-circle-08\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Input, {\n                  placeholder: \"Username\",\n                  type: \"text\",\n                  value: username,\n                  onChange: e => setUsername(e.target.value)\n                })]\n              })\n            }), /*#__PURE__*/_jsx(FormGroup, {\n              children: /*#__PURE__*/_jsxs(InputGroup, {\n                className: \"input-group-alternative\",\n                children: [/*#__PURE__*/_jsx(InputGroupAddon, {\n                  addonType: \"prepend\",\n                  children: /*#__PURE__*/_jsx(InputGroupText, {\n                    children: /*#__PURE__*/_jsx(\"i\", {\n                      className: \"ni ni-lock-circle-open\"\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Input, {\n                  placeholder: \"Password\",\n                  type: showPassword ? \"text\" : \"password\",\n                  autoComplete: \"new-password\",\n                  value: password,\n                  onChange: e => setPassword(e.target.value)\n                }), /*#__PURE__*/_jsx(InputGroupAddon, {\n                  addonType: \"append\",\n                  children: /*#__PURE__*/_jsx(Button, {\n                    onClick: handleTogglePassword,\n                    color: \"primary\",\n                    children: showPassword ? /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faEye\n                    }) : /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faEyeSlash\n                    })\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsx(Button, {\n                className: \"my-4\",\n                color: \"success\",\n                type: \"submit\",\n                disabled: loading,\n                children: loading ? /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(Spinner, {\n                    size: \"sm\",\n                    color: \"light\"\n                  }), \" Harap Tunggu\"]\n                }) : /*#__PURE__*/_jsxs(_Fragment, {\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"fa fa-arrow-circle-right mr-2\",\n                    \"aria-hidden\": \"true\"\n                  }), \"Masuk\"]\n                })\n              })\n            })]\n          })]\n        })]\n      })\n    })\n  });\n}\n\nLogin.layout = Auth;\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}